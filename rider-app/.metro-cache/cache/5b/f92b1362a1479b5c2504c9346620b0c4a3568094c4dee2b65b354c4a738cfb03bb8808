{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":26,"index":26}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"../config/firebaseConfig","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":28},"end":{"line":2,"column":48,"index":76}}],"key":"c2ktbavwtrva9DBC5I1TB1Fz260=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":78},"end":{"line":3,"column":40,"index":118}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"../config/spinr.config","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":120},"end":{"line":4,"column":49,"index":169}}],"key":"IJ6r40PgAe/ODljzAr7OC+eXrWE=","exportNames":["*"],"imports":1}},{"name":"expo-secure-store","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":25,"column":26,"index":743},"end":{"line":25,"column":54,"index":771}}],"key":"oflADjjImsOps+zbwR1yjTAbzjU=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _axios = require(_dependencyMap[1], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _configFirebaseConfig = require(_dependencyMap[2], \"../config/firebaseConfig\");\n  var _reactNative = require(_dependencyMap[3], \"react-native\");\n  var _configSpinrConfig = require(_dependencyMap[4], \"../config/spinr.config\");\n  var SpinrConfig = _interopDefault(_configSpinrConfig);\n  var isFirebaseConfigured = typeof _configFirebaseConfig.auth.onAuthStateChanged === 'function';\n  var API_URL = SpinrConfig.default.backendUrl;\n  console.log('API Client configured with URL:', API_URL);\n  var client = axios.default.create({\n    baseURL: `${API_URL}/api`,\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n\n  // Helper to get stored token\n  var getStoredToken = /*#__PURE__*/function () {\n    var _ref = (0, _asyncToGenerator.default)(function* () {\n      try {\n        if (_reactNative.Platform.OS === 'web' && typeof window !== 'undefined') {\n          return localStorage.getItem('auth_token');\n        } else {\n          var SecureStore = require(_dependencyMap[5], \"expo-secure-store\");\n          return yield SecureStore.getItemAsync('auth_token');\n        }\n      } catch (e) {}\n      return null;\n    });\n    return function getStoredToken() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  client.interceptors.request.use(/*#__PURE__*/function () {\n    var _ref2 = (0, _asyncToGenerator.default)(function* (config) {\n      try {\n        if (isFirebaseConfigured && _configFirebaseConfig.auth.currentUser) {\n          // Firebase token flow\n          var token = yield _configFirebaseConfig.auth.currentUser.getIdToken();\n          config.headers.Authorization = `Bearer ${token}`;\n        } else {\n          // Backend JWT flow â€” use stored token\n          var storedToken = yield getStoredToken();\n          if (storedToken) {\n            config.headers.Authorization = `Bearer ${storedToken}`;\n          }\n        }\n      } catch (error) {\n        console.error('Error attaching auth token:', error);\n      }\n      return config;\n    });\n    return function (_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }(), error => {\n    return Promise.reject(error);\n  });\n  var _default = client;\n});","lineCount":79,"map":[[12,2,56,0,"Object"],[12,8,56,0],[12,9,56,0,"defineProperty"],[12,23,56,0],[12,24,56,0,"exports"],[12,31,56,0],[13,4,56,0,"enumerable"],[13,14,56,0],[14,4,56,0,"get"],[14,7,56,0],[14,18,56,0,"get"],[14,19,56,0],[15,6,56,0],[15,13,56,0,"_default"],[15,21,56,0],[16,4,56,0],[17,2,56,0],[18,2,56,22],[18,6,56,22,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,56,22],[18,45,56,22,"require"],[18,52,56,22],[18,53,56,22,"_dependencyMap"],[18,67,56,22],[19,2,56,22],[19,6,56,22,"_asyncToGenerator"],[19,23,56,22],[19,26,56,22,"_interopDefault"],[19,41,56,22],[19,42,56,22,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,56,22],[20,2,1,0],[20,6,1,0,"_axios"],[20,12,1,0],[20,15,1,0,"require"],[20,22,1,0],[20,23,1,0,"_dependencyMap"],[20,37,1,0],[21,2,1,0],[21,6,1,0,"axios"],[21,11,1,0],[21,14,1,0,"_interopDefault"],[21,29,1,0],[21,30,1,0,"_axios"],[21,36,1,0],[22,2,2,0],[22,6,2,0,"_configFirebaseConfig"],[22,27,2,0],[22,30,2,0,"require"],[22,37,2,0],[22,38,2,0,"_dependencyMap"],[22,52,2,0],[23,2,3,0],[23,6,3,0,"_reactNative"],[23,18,3,0],[23,21,3,0,"require"],[23,28,3,0],[23,29,3,0,"_dependencyMap"],[23,43,3,0],[24,2,4,0],[24,6,4,0,"_configSpinrConfig"],[24,24,4,0],[24,27,4,0,"require"],[24,34,4,0],[24,35,4,0,"_dependencyMap"],[24,49,4,0],[25,2,4,0],[25,6,4,0,"SpinrConfig"],[25,17,4,0],[25,20,4,0,"_interopDefault"],[25,35,4,0],[25,36,4,0,"_configSpinrConfig"],[25,54,4,0],[26,2,6,0],[26,6,6,6,"isFirebaseConfigured"],[26,26,6,26],[26,29,6,29],[26,36,6,36,"auth"],[26,57,6,40],[26,58,6,40,"auth"],[26,62,6,40],[26,63,6,41,"onAuthStateChanged"],[26,81,6,59],[26,86,6,64],[26,96,6,74],[27,2,8,0],[27,6,8,6,"API_URL"],[27,13,8,13],[27,16,8,16,"SpinrConfig"],[27,27,8,27],[27,28,8,27,"default"],[27,35,8,27],[27,36,8,28,"backendUrl"],[27,46,8,38],[28,2,10,0,"console"],[28,9,10,7],[28,10,10,8,"log"],[28,13,10,11],[28,14,10,12],[28,47,10,45],[28,49,10,47,"API_URL"],[28,56,10,54],[28,57,10,55],[29,2,12,0],[29,6,12,6,"client"],[29,12,12,12],[29,15,12,15,"axios"],[29,20,12,20],[29,21,12,20,"default"],[29,28,12,20],[29,29,12,21,"create"],[29,35,12,27],[29,36,12,28],[30,4,13,2,"baseURL"],[30,11,13,9],[30,13,13,11],[30,16,13,14,"API_URL"],[30,23,13,21],[30,29,13,27],[31,4,14,2,"headers"],[31,11,14,9],[31,13,14,11],[32,6,15,4],[32,20,15,18],[32,22,15,20],[33,4,16,2],[34,2,17,0],[34,3,17,1],[34,4,17,2],[36,2,19,0],[37,2,20,0],[37,6,20,6,"getStoredToken"],[37,20,20,20],[38,4,20,20],[38,8,20,20,"_ref"],[38,12,20,20],[38,19,20,20,"_asyncToGenerator"],[38,36,20,20],[38,37,20,20,"default"],[38,44,20,20],[38,46,20,23],[38,59,20,59],[39,6,21,2],[39,10,21,6],[40,8,22,4],[40,12,22,8,"Platform"],[40,24,22,16],[40,25,22,16,"Platform"],[40,33,22,16],[40,34,22,17,"OS"],[40,36,22,19],[40,41,22,24],[40,46,22,29],[40,50,22,33],[40,57,22,40,"window"],[40,63,22,46],[40,68,22,51],[40,79,22,62],[40,81,22,64],[41,10,23,6],[41,17,23,13,"localStorage"],[41,29,23,25],[41,30,23,26,"getItem"],[41,37,23,33],[41,38,23,34],[41,50,23,46],[41,51,23,47],[42,8,24,4],[42,9,24,5],[42,15,24,11],[43,10,25,6],[43,14,25,12,"SecureStore"],[43,25,25,23],[43,28,25,26,"require"],[43,35,25,33],[43,36,25,33,"_dependencyMap"],[43,50,25,33],[43,74,25,53],[43,75,25,54],[44,10,26,6],[44,23,26,19,"SecureStore"],[44,34,26,30],[44,35,26,31,"getItemAsync"],[44,47,26,43],[44,48,26,44],[44,60,26,56],[44,61,26,57],[45,8,27,4],[46,6,28,2],[46,7,28,3],[46,8,28,4],[46,15,28,11,"e"],[46,16,28,12],[46,18,28,14],[46,19,28,16],[47,6,29,2],[47,13,29,9],[47,17,29,13],[48,4,30,0],[48,5,30,1],[49,4,30,1],[49,20,20,6,"getStoredToken"],[49,34,20,20,"getStoredToken"],[49,35,20,20],[50,6,20,20],[50,13,20,20,"_ref"],[50,17,20,20],[50,18,20,20,"apply"],[50,23,20,20],[50,30,20,20,"arguments"],[50,39,20,20],[51,4,20,20],[52,2,20,20],[52,5,30,1],[53,2,32,0,"client"],[53,8,32,6],[53,9,32,7,"interceptors"],[53,21,32,19],[53,22,32,20,"request"],[53,29,32,27],[53,30,32,28,"use"],[53,33,32,31],[54,4,32,31],[54,8,32,31,"_ref2"],[54,13,32,31],[54,20,32,31,"_asyncToGenerator"],[54,37,32,31],[54,38,32,31,"default"],[54,45,32,31],[54,47,33,2],[54,58,33,9,"config"],[54,64,33,15],[54,66,33,20],[55,6,34,4],[55,10,34,8],[56,8,35,6],[56,12,35,10,"isFirebaseConfigured"],[56,32,35,30],[56,36,35,34,"auth"],[56,57,35,38],[56,58,35,38,"auth"],[56,62,35,38],[56,63,35,39,"currentUser"],[56,74,35,50],[56,76,35,52],[57,10,36,8],[58,10,37,8],[58,14,37,14,"token"],[58,19,37,19],[58,28,37,28,"auth"],[58,49,37,32],[58,50,37,32,"auth"],[58,54,37,32],[58,55,37,33,"currentUser"],[58,66,37,44],[58,67,37,45,"getIdToken"],[58,77,37,55],[58,78,37,56],[58,79,37,57],[59,10,38,8,"config"],[59,16,38,14],[59,17,38,15,"headers"],[59,24,38,22],[59,25,38,23,"Authorization"],[59,38,38,36],[59,41,38,39],[59,51,38,49,"token"],[59,56,38,54],[59,58,38,56],[60,8,39,6],[60,9,39,7],[60,15,39,13],[61,10,40,8],[62,10,41,8],[62,14,41,14,"storedToken"],[62,25,41,25],[62,34,41,34,"getStoredToken"],[62,48,41,48],[62,49,41,49],[62,50,41,50],[63,10,42,8],[63,14,42,12,"storedToken"],[63,25,42,23],[63,27,42,25],[64,12,43,10,"config"],[64,18,43,16],[64,19,43,17,"headers"],[64,26,43,24],[64,27,43,25,"Authorization"],[64,40,43,38],[64,43,43,41],[64,53,43,51,"storedToken"],[64,64,43,62],[64,66,43,64],[65,10,44,8],[66,8,45,6],[67,6,46,4],[67,7,46,5],[67,8,46,6],[67,15,46,13,"error"],[67,20,46,18],[67,22,46,20],[68,8,47,6,"console"],[68,15,47,13],[68,16,47,14,"error"],[68,21,47,19],[68,22,47,20],[68,51,47,49],[68,53,47,51,"error"],[68,58,47,56],[68,59,47,57],[69,6,48,4],[70,6,49,4],[70,13,49,11,"config"],[70,19,49,17],[71,4,50,2],[71,5,50,3],[72,4,50,3],[72,21,50,3,"_x"],[72,23,50,3],[73,6,50,3],[73,13,50,3,"_ref2"],[73,18,50,3],[73,19,50,3,"apply"],[73,24,50,3],[73,31,50,3,"arguments"],[73,40,50,3],[74,4,50,3],[75,2,50,3],[75,7,51,3,"error"],[75,12,51,8],[75,16,51,13],[76,4,52,4],[76,11,52,11,"Promise"],[76,18,52,18],[76,19,52,19,"reject"],[76,25,52,25],[76,26,52,26,"error"],[76,31,52,31],[76,32,52,32],[77,2,53,2],[77,3,54,0],[77,4,54,1],[78,2,56,0],[78,6,56,0,"_default"],[78,14,56,0],[78,17,56,15,"client"],[78,23,56,21],[79,0,56,22],[79,3]],"functionMap":{"names":["<global>","getStoredToken","interceptors.request.use$argument_0","interceptors.request.use$argument_1"],"mappings":"AAA;uBCmB;CDU;EEG;GFiB;EGC;GHE"},"hasCjsExports":false},"type":"js/module"}]}