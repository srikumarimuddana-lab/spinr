{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":26,"index":26}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":28},"end":{"line":2,"column":39,"index":67}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}},{"name":"../config/firebaseConfig","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":69},"end":{"line":3,"column":48,"index":117}}],"key":"c2ktbavwtrva9DBC5I1TB1Fz260=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":119},"end":{"line":4,"column":40,"index":159}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"expo-secure-store","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":48,"column":26,"index":1464},"end":{"line":48,"column":54,"index":1492}}],"key":"oflADjjImsOps+zbwR1yjTAbzjU=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _expoVirtualEnv = require(_dependencyMap[1], \"expo/virtual/env\");\n  var _axios = require(_dependencyMap[2], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _expoConstants = require(_dependencyMap[3], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  var _configFirebaseConfig = require(_dependencyMap[4], \"../config/firebaseConfig\");\n  var _reactNative = require(_dependencyMap[5], \"react-native\");\n  var isFirebaseConfigured = typeof _configFirebaseConfig.auth.onAuthStateChanged === 'function';\n  var getBackendUrl = () => {\n    // 1. Prefer Environment Variable (e.g. from Vercel or .env)\n    if (_expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL) {\n      return _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL;\n    }\n\n    // 2. Fallback for Expo Go (Local Development)\n    // Expo Go runs on a physical device, so \"localhost\" won't work.\n    // We need the IP of the machine running the Expo server.\n    if (Constants.default.expoConfig?.hostUri) {\n      var host = Constants.default.expoConfig.hostUri.split(':')[0];\n      return `http://${host}:8000`;\n    }\n\n    // 3. Fallback for Web (Localhost)\n    if (_reactNative.Platform.OS === 'web' && typeof window !== 'undefined') {\n      // If no env var is set, assume local backend\n      return 'http://localhost:8000';\n    }\n    return '';\n  };\n  var API_URL = getBackendUrl();\n  console.log('API Client configured with URL:', API_URL);\n  var client = axios.default.create({\n    baseURL: `${API_URL}/api`,\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n\n  // Helper to get stored token\n  var getStoredToken = /*#__PURE__*/function () {\n    var _ref = (0, _asyncToGenerator.default)(function* () {\n      try {\n        if (_reactNative.Platform.OS === 'web' && typeof window !== 'undefined') {\n          return localStorage.getItem('auth_token');\n        } else {\n          var SecureStore = require(_dependencyMap[6], \"expo-secure-store\");\n          return yield SecureStore.getItemAsync('auth_token');\n        }\n      } catch (e) {}\n      return null;\n    });\n    return function getStoredToken() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  client.interceptors.request.use(/*#__PURE__*/function () {\n    var _ref2 = (0, _asyncToGenerator.default)(function* (config) {\n      try {\n        if (isFirebaseConfigured && _configFirebaseConfig.auth.currentUser) {\n          // Firebase token flow\n          var token = yield _configFirebaseConfig.auth.currentUser.getIdToken();\n          config.headers.Authorization = `Bearer ${token}`;\n        } else {\n          // Backend JWT flow â€” use stored token\n          var storedToken = yield getStoredToken();\n          if (storedToken) {\n            config.headers.Authorization = `Bearer ${storedToken}`;\n          }\n        }\n      } catch (error) {\n        console.error('Error attaching auth token:', error);\n      }\n      return config;\n    });\n    return function (_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }(), error => {\n    return Promise.reject(error);\n  });\n  var _default = client;\n});","lineCount":101,"map":[[12,2,79,0,"Object"],[12,8,79,0],[12,9,79,0,"defineProperty"],[12,23,79,0],[12,24,79,0,"exports"],[12,31,79,0],[13,4,79,0,"enumerable"],[13,14,79,0],[14,4,79,0,"get"],[14,7,79,0],[14,18,79,0,"get"],[14,19,79,0],[15,6,79,0],[15,13,79,0,"_default"],[15,21,79,0],[16,4,79,0],[17,2,79,0],[18,2,79,22],[18,6,79,22,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,79,22],[18,45,79,22,"require"],[18,52,79,22],[18,53,79,22,"_dependencyMap"],[18,67,79,22],[19,2,79,22],[19,6,79,22,"_asyncToGenerator"],[19,23,79,22],[19,26,79,22,"_interopDefault"],[19,41,79,22],[19,42,79,22,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,79,22],[20,2,79,22],[20,6,79,22,"_expoVirtualEnv"],[20,21,79,22],[20,24,79,22,"require"],[20,31,79,22],[20,32,79,22,"_dependencyMap"],[20,46,79,22],[21,2,1,0],[21,6,1,0,"_axios"],[21,12,1,0],[21,15,1,0,"require"],[21,22,1,0],[21,23,1,0,"_dependencyMap"],[21,37,1,0],[22,2,1,0],[22,6,1,0,"axios"],[22,11,1,0],[22,14,1,0,"_interopDefault"],[22,29,1,0],[22,30,1,0,"_axios"],[22,36,1,0],[23,2,2,0],[23,6,2,0,"_expoConstants"],[23,20,2,0],[23,23,2,0,"require"],[23,30,2,0],[23,31,2,0,"_dependencyMap"],[23,45,2,0],[24,2,2,0],[24,6,2,0,"Constants"],[24,15,2,0],[24,18,2,0,"_interopDefault"],[24,33,2,0],[24,34,2,0,"_expoConstants"],[24,48,2,0],[25,2,3,0],[25,6,3,0,"_configFirebaseConfig"],[25,27,3,0],[25,30,3,0,"require"],[25,37,3,0],[25,38,3,0,"_dependencyMap"],[25,52,3,0],[26,2,4,0],[26,6,4,0,"_reactNative"],[26,18,4,0],[26,21,4,0,"require"],[26,28,4,0],[26,29,4,0,"_dependencyMap"],[26,43,4,0],[27,2,6,0],[27,6,6,6,"isFirebaseConfigured"],[27,26,6,26],[27,29,6,29],[27,36,6,36,"auth"],[27,57,6,40],[27,58,6,40,"auth"],[27,62,6,40],[27,63,6,41,"onAuthStateChanged"],[27,81,6,59],[27,86,6,64],[27,96,6,74],[28,2,8,0],[28,6,8,6,"getBackendUrl"],[28,19,8,19],[28,22,8,22,"getBackendUrl"],[28,23,8,22],[28,28,8,28],[29,4,9,2],[30,4,10,2],[30,8,10,2,"_expoVirtualEnv"],[30,23,10,2],[30,24,10,2,"env"],[30,27,10,2],[30,28,10,2,"EXPO_PUBLIC_BACKEND_URL"],[30,51,10,2],[30,53,10,43],[31,6,11,4],[31,13,11,4,"_expoVirtualEnv"],[31,28,11,4],[31,29,11,4,"env"],[31,32,11,4],[31,33,11,4,"EXPO_PUBLIC_BACKEND_URL"],[31,56,11,4],[32,4,12,2],[34,4,14,2],[35,4,15,2],[36,4,16,2],[37,4,17,2],[37,8,17,6,"Constants"],[37,17,17,15],[37,18,17,15,"default"],[37,25,17,15],[37,26,17,16,"expoConfig"],[37,36,17,26],[37,38,17,28,"hostUri"],[37,45,17,35],[37,47,17,37],[38,6,18,4],[38,10,18,10,"host"],[38,14,18,14],[38,17,18,17,"Constants"],[38,26,18,26],[38,27,18,26,"default"],[38,34,18,26],[38,35,18,27,"expoConfig"],[38,45,18,37],[38,46,18,38,"hostUri"],[38,53,18,45],[38,54,18,46,"split"],[38,59,18,51],[38,60,18,52],[38,63,18,55],[38,64,18,56],[38,65,18,57],[38,66,18,58],[38,67,18,59],[39,6,19,4],[39,13,19,11],[39,23,19,21,"host"],[39,27,19,25],[39,34,19,32],[40,4,20,2],[42,4,22,2],[43,4,23,2],[43,8,23,6,"Platform"],[43,20,23,14],[43,21,23,14,"Platform"],[43,29,23,14],[43,30,23,15,"OS"],[43,32,23,17],[43,37,23,22],[43,42,23,27],[43,46,23,31],[43,53,23,38,"window"],[43,59,23,44],[43,64,23,49],[43,75,23,60],[43,77,23,62],[44,6,24,4],[45,6,25,4],[45,13,25,11],[45,36,25,34],[46,4,26,2],[47,4,28,2],[47,11,28,9],[47,13,28,11],[48,2,29,0],[48,3,29,1],[49,2,31,0],[49,6,31,6,"API_URL"],[49,13,31,13],[49,16,31,16,"getBackendUrl"],[49,29,31,29],[49,30,31,30],[49,31,31,31],[50,2,33,0,"console"],[50,9,33,7],[50,10,33,8,"log"],[50,13,33,11],[50,14,33,12],[50,47,33,45],[50,49,33,47,"API_URL"],[50,56,33,54],[50,57,33,55],[51,2,35,0],[51,6,35,6,"client"],[51,12,35,12],[51,15,35,15,"axios"],[51,20,35,20],[51,21,35,20,"default"],[51,28,35,20],[51,29,35,21,"create"],[51,35,35,27],[51,36,35,28],[52,4,36,2,"baseURL"],[52,11,36,9],[52,13,36,11],[52,16,36,14,"API_URL"],[52,23,36,21],[52,29,36,27],[53,4,37,2,"headers"],[53,11,37,9],[53,13,37,11],[54,6,38,4],[54,20,38,18],[54,22,38,20],[55,4,39,2],[56,2,40,0],[56,3,40,1],[56,4,40,2],[58,2,42,0],[59,2,43,0],[59,6,43,6,"getStoredToken"],[59,20,43,20],[60,4,43,20],[60,8,43,20,"_ref"],[60,12,43,20],[60,19,43,20,"_asyncToGenerator"],[60,36,43,20],[60,37,43,20,"default"],[60,44,43,20],[60,46,43,23],[60,59,43,59],[61,6,44,2],[61,10,44,6],[62,8,45,4],[62,12,45,8,"Platform"],[62,24,45,16],[62,25,45,16,"Platform"],[62,33,45,16],[62,34,45,17,"OS"],[62,36,45,19],[62,41,45,24],[62,46,45,29],[62,50,45,33],[62,57,45,40,"window"],[62,63,45,46],[62,68,45,51],[62,79,45,62],[62,81,45,64],[63,10,46,6],[63,17,46,13,"localStorage"],[63,29,46,25],[63,30,46,26,"getItem"],[63,37,46,33],[63,38,46,34],[63,50,46,46],[63,51,46,47],[64,8,47,4],[64,9,47,5],[64,15,47,11],[65,10,48,6],[65,14,48,12,"SecureStore"],[65,25,48,23],[65,28,48,26,"require"],[65,35,48,33],[65,36,48,33,"_dependencyMap"],[65,50,48,33],[65,74,48,53],[65,75,48,54],[66,10,49,6],[66,23,49,19,"SecureStore"],[66,34,49,30],[66,35,49,31,"getItemAsync"],[66,47,49,43],[66,48,49,44],[66,60,49,56],[66,61,49,57],[67,8,50,4],[68,6,51,2],[68,7,51,3],[68,8,51,4],[68,15,51,11,"e"],[68,16,51,12],[68,18,51,14],[68,19,51,16],[69,6,52,2],[69,13,52,9],[69,17,52,13],[70,4,53,0],[70,5,53,1],[71,4,53,1],[71,20,43,6,"getStoredToken"],[71,34,43,20,"getStoredToken"],[71,35,43,20],[72,6,43,20],[72,13,43,20,"_ref"],[72,17,43,20],[72,18,43,20,"apply"],[72,23,43,20],[72,30,43,20,"arguments"],[72,39,43,20],[73,4,43,20],[74,2,43,20],[74,5,53,1],[75,2,55,0,"client"],[75,8,55,6],[75,9,55,7,"interceptors"],[75,21,55,19],[75,22,55,20,"request"],[75,29,55,27],[75,30,55,28,"use"],[75,33,55,31],[76,4,55,31],[76,8,55,31,"_ref2"],[76,13,55,31],[76,20,55,31,"_asyncToGenerator"],[76,37,55,31],[76,38,55,31,"default"],[76,45,55,31],[76,47,56,2],[76,58,56,9,"config"],[76,64,56,15],[76,66,56,20],[77,6,57,4],[77,10,57,8],[78,8,58,6],[78,12,58,10,"isFirebaseConfigured"],[78,32,58,30],[78,36,58,34,"auth"],[78,57,58,38],[78,58,58,38,"auth"],[78,62,58,38],[78,63,58,39,"currentUser"],[78,74,58,50],[78,76,58,52],[79,10,59,8],[80,10,60,8],[80,14,60,14,"token"],[80,19,60,19],[80,28,60,28,"auth"],[80,49,60,32],[80,50,60,32,"auth"],[80,54,60,32],[80,55,60,33,"currentUser"],[80,66,60,44],[80,67,60,45,"getIdToken"],[80,77,60,55],[80,78,60,56],[80,79,60,57],[81,10,61,8,"config"],[81,16,61,14],[81,17,61,15,"headers"],[81,24,61,22],[81,25,61,23,"Authorization"],[81,38,61,36],[81,41,61,39],[81,51,61,49,"token"],[81,56,61,54],[81,58,61,56],[82,8,62,6],[82,9,62,7],[82,15,62,13],[83,10,63,8],[84,10,64,8],[84,14,64,14,"storedToken"],[84,25,64,25],[84,34,64,34,"getStoredToken"],[84,48,64,48],[84,49,64,49],[84,50,64,50],[85,10,65,8],[85,14,65,12,"storedToken"],[85,25,65,23],[85,27,65,25],[86,12,66,10,"config"],[86,18,66,16],[86,19,66,17,"headers"],[86,26,66,24],[86,27,66,25,"Authorization"],[86,40,66,38],[86,43,66,41],[86,53,66,51,"storedToken"],[86,64,66,62],[86,66,66,64],[87,10,67,8],[88,8,68,6],[89,6,69,4],[89,7,69,5],[89,8,69,6],[89,15,69,13,"error"],[89,20,69,18],[89,22,69,20],[90,8,70,6,"console"],[90,15,70,13],[90,16,70,14,"error"],[90,21,70,19],[90,22,70,20],[90,51,70,49],[90,53,70,51,"error"],[90,58,70,56],[90,59,70,57],[91,6,71,4],[92,6,72,4],[92,13,72,11,"config"],[92,19,72,17],[93,4,73,2],[93,5,73,3],[94,4,73,3],[94,21,73,3,"_x"],[94,23,73,3],[95,6,73,3],[95,13,73,3,"_ref2"],[95,18,73,3],[95,19,73,3,"apply"],[95,24,73,3],[95,31,73,3,"arguments"],[95,40,73,3],[96,4,73,3],[97,2,73,3],[97,7,74,3,"error"],[97,12,74,8],[97,16,74,13],[98,4,75,4],[98,11,75,11,"Promise"],[98,18,75,18],[98,19,75,19,"reject"],[98,25,75,25],[98,26,75,26,"error"],[98,31,75,31],[98,32,75,32],[99,2,76,2],[99,3,77,0],[99,4,77,1],[100,2,79,0],[100,6,79,0,"_default"],[100,14,79,0],[100,17,79,15,"client"],[100,23,79,21],[101,0,79,22],[101,3]],"functionMap":{"names":["<global>","getBackendUrl","getStoredToken","interceptors.request.use$argument_0","interceptors.request.use$argument_1"],"mappings":"AAA;sBCO;CDqB;uBEc;CFU;EGG;GHiB;EIC;GJE"},"hasCjsExports":false},"type":"js/module"}]}