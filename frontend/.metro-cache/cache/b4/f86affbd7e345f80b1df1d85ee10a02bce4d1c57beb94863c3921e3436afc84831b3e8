{"dependencies":[{"name":"../config/spinr.config","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":49,"index":49}}],"key":"IJ6r40PgAe/ODljzAr7OC+eXrWE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.uploadFile = uploadFile;\n  var _configSpinrConfig = require(_dependencyMap[0], \"../config/spinr.config\");\n  var SpinrConfig = _interopDefault(_configSpinrConfig);\n  /**\r\n   * Uploads a file to the backend server.\r\n   * @param uri The local URI of the file.\r\n   * @param name The file name.\r\n   * @param type The MIME type of the file.\r\n   * @returns The release URL (e.g. /uploads/filename.jpg)\r\n   */\n  async function uploadFile(uri, name, type) {\n    const formData = new FormData();\n    // specific shape for React Native FormData\n    formData.append('file', {\n      uri,\n      name: name || 'upload',\n      type: type || 'application/octet-stream'\n    });\n    try {\n      // We do NOT set Content-Type header so that the browser/engine sets the boundary correctly\n      const response = await fetch(`${SpinrConfig.default.backendUrl}/api/upload`, {\n        method: 'POST',\n        body: formData\n      });\n      if (!response.ok) {\n        const text = await response.text();\n        throw new Error(`Upload failed: ${response.status} ${text}`);\n      }\n      const data = await response.json();\n      return data.url;\n    } catch (error) {\n      console.error('File upload error:', error);\n      throw error;\n    }\n  }\n});","lineCount":47,"map":[[12,2,10,0,"exports"],[12,9,10,0],[12,10,10,0,"uploadFile"],[12,20,10,0],[12,23,10,0,"uploadFile"],[12,33,10,0],[13,2,1,0],[13,6,1,0,"_configSpinrConfig"],[13,24,1,0],[13,27,1,0,"require"],[13,34,1,0],[13,35,1,0,"_dependencyMap"],[13,49,1,0],[14,2,1,0],[14,6,1,0,"SpinrConfig"],[14,17,1,0],[14,20,1,0,"_interopDefault"],[14,35,1,0],[14,36,1,0,"_configSpinrConfig"],[14,54,1,0],[15,2,3,0],[16,0,4,0],[17,0,5,0],[18,0,6,0],[19,0,7,0],[20,0,8,0],[21,0,9,0],[22,2,10,7],[22,17,10,22,"uploadFile"],[22,27,10,32,"uploadFile"],[22,28,10,33,"uri"],[22,31,10,44],[22,33,10,46,"name"],[22,37,10,58],[22,39,10,60,"type"],[22,43,10,72],[22,45,10,91],[23,4,11,4],[23,10,11,10,"formData"],[23,18,11,18],[23,21,11,21],[23,25,11,25,"FormData"],[23,33,11,33],[23,34,11,34],[23,35,11,35],[24,4,12,4],[25,4,13,4,"formData"],[25,12,13,12],[25,13,13,13,"append"],[25,19,13,19],[25,20,13,20],[25,26,13,26],[25,28,13,28],[26,6,14,8,"uri"],[26,9,14,11],[27,6,15,8,"name"],[27,10,15,12],[27,12,15,14,"name"],[27,16,15,18],[27,20,15,22],[27,28,15,30],[28,6,16,8,"type"],[28,10,16,12],[28,12,16,14,"type"],[28,16,16,18],[28,20,16,22],[29,4,17,4],[29,5,17,12],[29,6,17,13],[30,4,19,4],[30,8,19,8],[31,6,20,8],[32,6,21,8],[32,12,21,14,"response"],[32,20,21,22],[32,23,21,25],[32,29,21,31,"fetch"],[32,34,21,36],[32,35,21,37],[32,38,21,40,"SpinrConfig"],[32,49,21,51],[32,50,21,51,"default"],[32,57,21,51],[32,58,21,52,"backendUrl"],[32,68,21,62],[32,81,21,75],[32,83,21,77],[33,8,22,12,"method"],[33,14,22,18],[33,16,22,20],[33,22,22,26],[34,8,23,12,"body"],[34,12,23,16],[34,14,23,18,"formData"],[35,6,24,8],[35,7,24,9],[35,8,24,10],[36,6,26,8],[36,10,26,12],[36,11,26,13,"response"],[36,19,26,21],[36,20,26,22,"ok"],[36,22,26,24],[36,24,26,26],[37,8,27,12],[37,14,27,18,"text"],[37,18,27,22],[37,21,27,25],[37,27,27,31,"response"],[37,35,27,39],[37,36,27,40,"text"],[37,40,27,44],[37,41,27,45],[37,42,27,46],[38,8,28,12],[38,14,28,18],[38,18,28,22,"Error"],[38,23,28,27],[38,24,28,28],[38,42,28,46,"response"],[38,50,28,54],[38,51,28,55,"status"],[38,57,28,61],[38,61,28,65,"text"],[38,65,28,69],[38,67,28,71],[38,68,28,72],[39,6,29,8],[40,6,31,8],[40,12,31,14,"data"],[40,16,31,18],[40,19,31,21],[40,25,31,27,"response"],[40,33,31,35],[40,34,31,36,"json"],[40,38,31,40],[40,39,31,41],[40,40,31,42],[41,6,32,8],[41,13,32,15,"data"],[41,17,32,19],[41,18,32,20,"url"],[41,21,32,23],[42,4,33,4],[42,5,33,5],[42,6,33,6],[42,13,33,13,"error"],[42,18,33,18],[42,20,33,20],[43,6,34,8,"console"],[43,13,34,15],[43,14,34,16,"error"],[43,19,34,21],[43,20,34,22],[43,40,34,42],[43,42,34,44,"error"],[43,47,34,49],[43,48,34,50],[44,6,35,8],[44,12,35,14,"error"],[44,17,35,19],[45,4,36,4],[46,2,37,0],[47,0,37,1],[47,3]],"functionMap":{"names":["<global>","uploadFile"],"mappings":"AAA;OCS;CD2B"},"hasCjsExports":false},"type":"js/module"}]}