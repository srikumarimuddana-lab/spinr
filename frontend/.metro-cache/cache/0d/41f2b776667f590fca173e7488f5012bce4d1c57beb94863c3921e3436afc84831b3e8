{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"../config/spinr.config","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":49,"index":49}}],"key":"IJ6r40PgAe/ODljzAr7OC+eXrWE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.uploadFile = uploadFile;\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _configSpinrConfig = require(_dependencyMap[1], \"../config/spinr.config\");\n  var SpinrConfig = _interopDefault(_configSpinrConfig);\n  /**\r\n   * Uploads a file to the backend server.\r\n   * @param uri The local URI of the file.\r\n   * @param name The file name.\r\n   * @param type The MIME type of the file.\r\n   * @returns The release URL (e.g. /uploads/filename.jpg)\r\n   */\n  function uploadFile(_x, _x2, _x3) {\n    return _uploadFile.apply(this, arguments);\n  }\n  function _uploadFile() {\n    _uploadFile = (0, _asyncToGenerator.default)(function* (uri, name, type) {\n      var formData = new FormData();\n      // specific shape for React Native FormData\n      formData.append('file', {\n        uri,\n        name: name || 'upload',\n        type: type || 'application/octet-stream'\n      });\n      try {\n        // We do NOT set Content-Type header so that the browser/engine sets the boundary correctly\n        var response = yield fetch(`${SpinrConfig.default.backendUrl}/api/upload`, {\n          method: 'POST',\n          body: formData\n        });\n        if (!response.ok) {\n          var text = yield response.text();\n          throw new Error(`Upload failed: ${response.status} ${text}`);\n        }\n        var data = yield response.json();\n        return data.url;\n      } catch (error) {\n        console.error('File upload error:', error);\n        throw error;\n      }\n    });\n    return _uploadFile.apply(this, arguments);\n  }\n});","lineCount":55,"map":[[12,2,10,0,"exports"],[12,9,10,0],[12,10,10,0,"uploadFile"],[12,20,10,0],[12,23,10,0,"uploadFile"],[12,33,10,0],[13,2,37,1],[13,6,37,1,"_babelRuntimeHelpersAsyncToGenerator"],[13,42,37,1],[13,45,37,1,"require"],[13,52,37,1],[13,53,37,1,"_dependencyMap"],[13,67,37,1],[14,2,37,1],[14,6,37,1,"_asyncToGenerator"],[14,23,37,1],[14,26,37,1,"_interopDefault"],[14,41,37,1],[14,42,37,1,"_babelRuntimeHelpersAsyncToGenerator"],[14,78,37,1],[15,2,1,0],[15,6,1,0,"_configSpinrConfig"],[15,24,1,0],[15,27,1,0,"require"],[15,34,1,0],[15,35,1,0,"_dependencyMap"],[15,49,1,0],[16,2,1,0],[16,6,1,0,"SpinrConfig"],[16,17,1,0],[16,20,1,0,"_interopDefault"],[16,35,1,0],[16,36,1,0,"_configSpinrConfig"],[16,54,1,0],[17,2,3,0],[18,0,4,0],[19,0,5,0],[20,0,6,0],[21,0,7,0],[22,0,8,0],[23,0,9,0],[24,2,3,0],[24,11,10,22,"uploadFile"],[24,21,10,32,"uploadFile"],[24,22,10,32,"_x"],[24,24,10,32],[24,26,10,32,"_x2"],[24,29,10,32],[24,31,10,32,"_x3"],[24,34,10,32],[25,4,10,32],[25,11,10,32,"_uploadFile"],[25,22,10,32],[25,23,10,32,"apply"],[25,28,10,32],[25,35,10,32,"arguments"],[25,44,10,32],[26,2,10,32],[27,2,10,32],[27,11,10,32,"_uploadFile"],[27,23,10,32],[28,4,10,32,"_uploadFile"],[28,15,10,32],[28,22,10,32,"_asyncToGenerator"],[28,39,10,32],[28,40,10,32,"default"],[28,47,10,32],[28,49,10,7],[28,60,10,33,"uri"],[28,63,10,44],[28,65,10,46,"name"],[28,69,10,58],[28,71,10,60,"type"],[28,75,10,72],[28,77,10,91],[29,6,11,4],[29,10,11,10,"formData"],[29,18,11,18],[29,21,11,21],[29,25,11,25,"FormData"],[29,33,11,33],[29,34,11,34],[29,35,11,35],[30,6,12,4],[31,6,13,4,"formData"],[31,14,13,12],[31,15,13,13,"append"],[31,21,13,19],[31,22,13,20],[31,28,13,26],[31,30,13,28],[32,8,14,8,"uri"],[32,11,14,11],[33,8,15,8,"name"],[33,12,15,12],[33,14,15,14,"name"],[33,18,15,18],[33,22,15,22],[33,30,15,30],[34,8,16,8,"type"],[34,12,16,12],[34,14,16,14,"type"],[34,18,16,18],[34,22,16,22],[35,6,17,4],[35,7,17,12],[35,8,17,13],[36,6,19,4],[36,10,19,8],[37,8,20,8],[38,8,21,8],[38,12,21,14,"response"],[38,20,21,22],[38,29,21,31,"fetch"],[38,34,21,36],[38,35,21,37],[38,38,21,40,"SpinrConfig"],[38,49,21,51],[38,50,21,51,"default"],[38,57,21,51],[38,58,21,52,"backendUrl"],[38,68,21,62],[38,81,21,75],[38,83,21,77],[39,10,22,12,"method"],[39,16,22,18],[39,18,22,20],[39,24,22,26],[40,10,23,12,"body"],[40,14,23,16],[40,16,23,18,"formData"],[41,8,24,8],[41,9,24,9],[41,10,24,10],[42,8,26,8],[42,12,26,12],[42,13,26,13,"response"],[42,21,26,21],[42,22,26,22,"ok"],[42,24,26,24],[42,26,26,26],[43,10,27,12],[43,14,27,18,"text"],[43,18,27,22],[43,27,27,31,"response"],[43,35,27,39],[43,36,27,40,"text"],[43,40,27,44],[43,41,27,45],[43,42,27,46],[44,10,28,12],[44,16,28,18],[44,20,28,22,"Error"],[44,25,28,27],[44,26,28,28],[44,44,28,46,"response"],[44,52,28,54],[44,53,28,55,"status"],[44,59,28,61],[44,63,28,65,"text"],[44,67,28,69],[44,69,28,71],[44,70,28,72],[45,8,29,8],[46,8,31,8],[46,12,31,14,"data"],[46,16,31,18],[46,25,31,27,"response"],[46,33,31,35],[46,34,31,36,"json"],[46,38,31,40],[46,39,31,41],[46,40,31,42],[47,8,32,8],[47,15,32,15,"data"],[47,19,32,19],[47,20,32,20,"url"],[47,23,32,23],[48,6,33,4],[48,7,33,5],[48,8,33,6],[48,15,33,13,"error"],[48,20,33,18],[48,22,33,20],[49,8,34,8,"console"],[49,15,34,15],[49,16,34,16,"error"],[49,21,34,21],[49,22,34,22],[49,42,34,42],[49,44,34,44,"error"],[49,49,34,49],[49,50,34,50],[50,8,35,8],[50,14,35,14,"error"],[50,19,35,19],[51,6,36,4],[52,4,37,0],[52,5,37,1],[53,4,37,1],[53,11,37,1,"_uploadFile"],[53,22,37,1],[53,23,37,1,"apply"],[53,28,37,1],[53,35,37,1,"arguments"],[53,44,37,1],[54,2,37,1],[55,0,37,1],[55,3]],"functionMap":{"names":["<global>","uploadFile"],"mappings":"AAA;OCS;CD2B"},"hasCjsExports":false},"type":"js/module"}]}