{"dependencies":[{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"expo-secure-store","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":34},"end":{"line":2,"column":49,"index":83}}],"key":"BU2XtfznZ4PiVldqd/oueHCCaLo=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":84},"end":{"line":3,"column":26,"index":110}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":111},"end":{"line":4,"column":39,"index":150}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useAuthStore\", {\n    enumerable: true,\n    get: function () {\n      return useAuthStore;\n    }\n  });\n  var _zustand = require(_dependencyMap[0], \"zustand\");\n  var _expoSecureStore = require(_dependencyMap[1], \"expo-secure-store\");\n  var SecureStore = _interopNamespace(_expoSecureStore);\n  var _axios = require(_dependencyMap[2], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _expoConstants = require(_dependencyMap[3], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  const API_URL = Constants.default.expoConfig?.extra?.backendUrl || process.env.EXPO_PUBLIC_BACKEND_URL || '';\n  const api = axios.default.create({\n    baseURL: `${API_URL}/api`,\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n  const useAuthStore = (0, _zustand.create)((set, get) => ({\n    user: null,\n    token: null,\n    isLoading: false,\n    isInitialized: false,\n    error: null,\n    initialize: async () => {\n      try {\n        set({\n          isLoading: true\n        });\n\n        // Get token from secure storage\n        const token = await SecureStore.getItemAsync('auth_token');\n        if (token) {\n          // Set token in axios headers\n          api.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n\n          // Fetch user profile\n          const response = await api.get('/auth/me');\n          set({\n            user: response.data,\n            token,\n            isInitialized: true,\n            isLoading: false\n          });\n        } else {\n          set({\n            isInitialized: true,\n            isLoading: false\n          });\n        }\n      } catch (error) {\n        console.log('Auth initialization error:', error.message);\n        // Token might be invalid, clear it\n        await SecureStore.deleteItemAsync('auth_token');\n        set({\n          user: null,\n          token: null,\n          isInitialized: true,\n          isLoading: false\n        });\n      }\n    },\n    sendOTP: async phone => {\n      try {\n        set({\n          isLoading: true,\n          error: null\n        });\n        const response = await api.post('/auth/send-otp', {\n          phone\n        });\n        set({\n          isLoading: false\n        });\n        return {\n          success: response.data.success,\n          dev_otp: response.data.dev_otp\n        };\n      } catch (error) {\n        const message = error.response?.data?.detail || 'Failed to send OTP';\n        set({\n          isLoading: false,\n          error: message\n        });\n        throw new Error(message);\n      }\n    },\n    verifyOTP: async (phone, code) => {\n      try {\n        set({\n          isLoading: true,\n          error: null\n        });\n        const response = await api.post('/auth/verify-otp', {\n          phone,\n          code\n        });\n        const {\n          token,\n          user,\n          is_new_user\n        } = response.data;\n\n        // Store token securely\n        await SecureStore.setItemAsync('auth_token', token);\n\n        // Set token in axios headers\n        api.defaults.headers.common['Authorization'] = `Bearer ${token}`;\n        set({\n          user,\n          token,\n          isLoading: false\n        });\n        return {\n          is_new_user\n        };\n      } catch (error) {\n        const message = error.response?.data?.detail || 'Invalid verification code';\n        set({\n          isLoading: false,\n          error: message\n        });\n        throw new Error(message);\n      }\n    },\n    createProfile: async data => {\n      try {\n        set({\n          isLoading: true,\n          error: null\n        });\n        const response = await api.post('/users/profile', data);\n        set({\n          user: response.data,\n          isLoading: false\n        });\n      } catch (error) {\n        const message = error.response?.data?.detail || 'Failed to create profile';\n        set({\n          isLoading: false,\n          error: message\n        });\n        throw new Error(message);\n      }\n    },\n    logout: async () => {\n      try {\n        await SecureStore.deleteItemAsync('auth_token');\n        delete api.defaults.headers.common['Authorization'];\n        set({\n          user: null,\n          token: null\n        });\n      } catch (error) {\n        console.log('Logout error:', error);\n      }\n    },\n    clearError: () => set({\n      error: null\n    })\n  }));\n});","lineCount":190,"map":[[27,2,43,0,"Object"],[27,8,43,0],[27,9,43,0,"defineProperty"],[27,23,43,0],[27,24,43,0,"exports"],[27,31,43,0],[28,4,43,0,"enumerable"],[28,14,43,0],[29,4,43,0,"get"],[29,7,43,0],[29,18,43,0,"get"],[29,19,43,0],[30,6,43,0],[30,13,43,0,"useAuthStore"],[30,25,43,0],[31,4,43,0],[32,2,43,0],[33,2,1,0],[33,6,1,0,"_zustand"],[33,14,1,0],[33,17,1,0,"require"],[33,24,1,0],[33,25,1,0,"_dependencyMap"],[33,39,1,0],[34,2,2,0],[34,6,2,0,"_expoSecureStore"],[34,22,2,0],[34,25,2,0,"require"],[34,32,2,0],[34,33,2,0,"_dependencyMap"],[34,47,2,0],[35,2,2,0],[35,6,2,0,"SecureStore"],[35,17,2,0],[35,20,2,0,"_interopNamespace"],[35,37,2,0],[35,38,2,0,"_expoSecureStore"],[35,54,2,0],[36,2,3,0],[36,6,3,0,"_axios"],[36,12,3,0],[36,15,3,0,"require"],[36,22,3,0],[36,23,3,0,"_dependencyMap"],[36,37,3,0],[37,2,3,0],[37,6,3,0,"axios"],[37,11,3,0],[37,14,3,0,"_interopDefault"],[37,29,3,0],[37,30,3,0,"_axios"],[37,36,3,0],[38,2,4,0],[38,6,4,0,"_expoConstants"],[38,20,4,0],[38,23,4,0,"require"],[38,30,4,0],[38,31,4,0,"_dependencyMap"],[38,45,4,0],[39,2,4,0],[39,6,4,0,"Constants"],[39,15,4,0],[39,18,4,0,"_interopDefault"],[39,33,4,0],[39,34,4,0,"_expoConstants"],[39,48,4,0],[40,2,6,0],[40,8,6,6,"API_URL"],[40,15,6,13],[40,18,6,16,"Constants"],[40,27,6,25],[40,28,6,25,"default"],[40,35,6,25],[40,36,6,26,"expoConfig"],[40,46,6,36],[40,48,6,38,"extra"],[40,53,6,43],[40,55,6,45,"backendUrl"],[40,65,6,55],[40,69,6,59,"process"],[40,76,6,66],[40,77,6,67,"env"],[40,80,6,70],[40,81,6,71,"EXPO_PUBLIC_BACKEND_URL"],[40,104,6,94],[40,108,6,98],[40,110,6,100],[41,2,36,0],[41,8,36,6,"api"],[41,11,36,9],[41,14,36,12,"axios"],[41,19,36,17],[41,20,36,17,"default"],[41,27,36,17],[41,28,36,18,"create"],[41,34,36,24],[41,35,36,25],[42,4,37,2,"baseURL"],[42,11,37,9],[42,13,37,11],[42,16,37,14,"API_URL"],[42,23,37,21],[42,29,37,27],[43,4,38,2,"headers"],[43,11,38,9],[43,13,38,11],[44,6,39,4],[44,20,39,18],[44,22,39,20],[45,4,40,2],[46,2,41,0],[46,3,41,1],[46,4,41,2],[47,2,43,7],[47,8,43,13,"useAuthStore"],[47,20,43,25],[47,23,43,28],[47,27,43,28,"create"],[47,35,43,34],[47,36,43,34,"create"],[47,42,43,34],[47,44,43,46],[47,45,43,47,"set"],[47,48,43,50],[47,50,43,52,"get"],[47,53,43,55],[47,59,43,61],[48,4,44,2,"user"],[48,8,44,6],[48,10,44,8],[48,14,44,12],[49,4,45,2,"token"],[49,9,45,7],[49,11,45,9],[49,15,45,13],[50,4,46,2,"isLoading"],[50,13,46,11],[50,15,46,13],[50,20,46,18],[51,4,47,2,"isInitialized"],[51,17,47,15],[51,19,47,17],[51,24,47,22],[52,4,48,2,"error"],[52,9,48,7],[52,11,48,9],[52,15,48,13],[53,4,50,2,"initialize"],[53,14,50,12],[53,16,50,14],[53,22,50,14,"initialize"],[53,23,50,14],[53,28,50,26],[54,6,51,4],[54,10,51,8],[55,8,52,6,"set"],[55,11,52,9],[55,12,52,10],[56,10,52,12,"isLoading"],[56,19,52,21],[56,21,52,23],[57,8,52,28],[57,9,52,29],[57,10,52,30],[59,8,54,6],[60,8,55,6],[60,14,55,12,"token"],[60,19,55,17],[60,22,55,20],[60,28,55,26,"SecureStore"],[60,39,55,37],[60,40,55,38,"getItemAsync"],[60,52,55,50],[60,53,55,51],[60,65,55,63],[60,66,55,64],[61,8,57,6],[61,12,57,10,"token"],[61,17,57,15],[61,19,57,17],[62,10,58,8],[63,10,59,8,"api"],[63,13,59,11],[63,14,59,12,"defaults"],[63,22,59,20],[63,23,59,21,"headers"],[63,30,59,28],[63,31,59,29,"common"],[63,37,59,35],[63,38,59,36],[63,53,59,51],[63,54,59,52],[63,57,59,55],[63,67,59,65,"token"],[63,72,59,70],[63,74,59,72],[65,10,61,8],[66,10,62,8],[66,16,62,14,"response"],[66,24,62,22],[66,27,62,25],[66,33,62,31,"api"],[66,36,62,34],[66,37,62,35,"get"],[66,40,62,38],[66,41,62,39],[66,51,62,49],[66,52,62,50],[67,10,63,8,"set"],[67,13,63,11],[67,14,63,12],[68,12,64,10,"user"],[68,16,64,14],[68,18,64,16,"response"],[68,26,64,24],[68,27,64,25,"data"],[68,31,64,29],[69,12,65,10,"token"],[69,17,65,15],[70,12,66,10,"isInitialized"],[70,25,66,23],[70,27,66,25],[70,31,66,29],[71,12,67,10,"isLoading"],[71,21,67,19],[71,23,67,21],[72,10,68,8],[72,11,68,9],[72,12,68,10],[73,8,69,6],[73,9,69,7],[73,15,69,13],[74,10,70,8,"set"],[74,13,70,11],[74,14,70,12],[75,12,70,14,"isInitialized"],[75,25,70,27],[75,27,70,29],[75,31,70,33],[76,12,70,35,"isLoading"],[76,21,70,44],[76,23,70,46],[77,10,70,52],[77,11,70,53],[77,12,70,54],[78,8,71,6],[79,6,72,4],[79,7,72,5],[79,8,72,6],[79,15,72,13,"error"],[79,20,72,23],[79,22,72,25],[80,8,73,6,"console"],[80,15,73,13],[80,16,73,14,"log"],[80,19,73,17],[80,20,73,18],[80,48,73,46],[80,50,73,48,"error"],[80,55,73,53],[80,56,73,54,"message"],[80,63,73,61],[80,64,73,62],[81,8,74,6],[82,8,75,6],[82,14,75,12,"SecureStore"],[82,25,75,23],[82,26,75,24,"deleteItemAsync"],[82,41,75,39],[82,42,75,40],[82,54,75,52],[82,55,75,53],[83,8,76,6,"set"],[83,11,76,9],[83,12,76,10],[84,10,77,8,"user"],[84,14,77,12],[84,16,77,14],[84,20,77,18],[85,10,78,8,"token"],[85,15,78,13],[85,17,78,15],[85,21,78,19],[86,10,79,8,"isInitialized"],[86,23,79,21],[86,25,79,23],[86,29,79,27],[87,10,80,8,"isLoading"],[87,19,80,17],[87,21,80,19],[88,8,81,6],[88,9,81,7],[88,10,81,8],[89,6,82,4],[90,4,83,2],[90,5,83,3],[91,4,85,2,"sendOTP"],[91,11,85,9],[91,13,85,11],[91,19,85,18,"phone"],[91,24,85,31],[91,28,85,36],[92,6,86,4],[92,10,86,8],[93,8,87,6,"set"],[93,11,87,9],[93,12,87,10],[94,10,87,12,"isLoading"],[94,19,87,21],[94,21,87,23],[94,25,87,27],[95,10,87,29,"error"],[95,15,87,34],[95,17,87,36],[96,8,87,41],[96,9,87,42],[96,10,87,43],[97,8,89,6],[97,14,89,12,"response"],[97,22,89,20],[97,25,89,23],[97,31,89,29,"api"],[97,34,89,32],[97,35,89,33,"post"],[97,39,89,37],[97,40,89,38],[97,56,89,54],[97,58,89,56],[98,10,89,58,"phone"],[99,8,89,64],[99,9,89,65],[99,10,89,66],[100,8,91,6,"set"],[100,11,91,9],[100,12,91,10],[101,10,91,12,"isLoading"],[101,19,91,21],[101,21,91,23],[102,8,91,29],[102,9,91,30],[102,10,91,31],[103,8,92,6],[103,15,92,13],[104,10,93,8,"success"],[104,17,93,15],[104,19,93,17,"response"],[104,27,93,25],[104,28,93,26,"data"],[104,32,93,30],[104,33,93,31,"success"],[104,40,93,38],[105,10,94,8,"dev_otp"],[105,17,94,15],[105,19,94,17,"response"],[105,27,94,25],[105,28,94,26,"data"],[105,32,94,30],[105,33,94,31,"dev_otp"],[106,8,95,6],[106,9,95,7],[107,6,96,4],[107,7,96,5],[107,8,96,6],[107,15,96,13,"error"],[107,20,96,23],[107,22,96,25],[108,8,97,6],[108,14,97,12,"message"],[108,21,97,19],[108,24,97,22,"error"],[108,29,97,27],[108,30,97,28,"response"],[108,38,97,36],[108,40,97,38,"data"],[108,44,97,42],[108,46,97,44,"detail"],[108,52,97,50],[108,56,97,54],[108,76,97,74],[109,8,98,6,"set"],[109,11,98,9],[109,12,98,10],[110,10,98,12,"isLoading"],[110,19,98,21],[110,21,98,23],[110,26,98,28],[111,10,98,30,"error"],[111,15,98,35],[111,17,98,37,"message"],[112,8,98,45],[112,9,98,46],[112,10,98,47],[113,8,99,6],[113,14,99,12],[113,18,99,16,"Error"],[113,23,99,21],[113,24,99,22,"message"],[113,31,99,29],[113,32,99,30],[114,6,100,4],[115,4,101,2],[115,5,101,3],[116,4,103,2,"verifyOTP"],[116,13,103,11],[116,15,103,13],[116,21,103,13,"verifyOTP"],[116,22,103,20,"phone"],[116,27,103,33],[116,29,103,35,"code"],[116,33,103,47],[116,38,103,52],[117,6,104,4],[117,10,104,8],[118,8,105,6,"set"],[118,11,105,9],[118,12,105,10],[119,10,105,12,"isLoading"],[119,19,105,21],[119,21,105,23],[119,25,105,27],[120,10,105,29,"error"],[120,15,105,34],[120,17,105,36],[121,8,105,41],[121,9,105,42],[121,10,105,43],[122,8,107,6],[122,14,107,12,"response"],[122,22,107,20],[122,25,107,23],[122,31,107,29,"api"],[122,34,107,32],[122,35,107,33,"post"],[122,39,107,37],[122,40,107,38],[122,58,107,56],[122,60,107,58],[123,10,107,60,"phone"],[123,15,107,65],[124,10,107,67,"code"],[125,8,107,72],[125,9,107,73],[125,10,107,74],[126,8,108,6],[126,14,108,12],[127,10,108,14,"token"],[127,15,108,19],[128,10,108,21,"user"],[128,14,108,25],[129,10,108,27,"is_new_user"],[130,8,108,39],[130,9,108,40],[130,12,108,43,"response"],[130,20,108,51],[130,21,108,52,"data"],[130,25,108,56],[132,8,110,6],[133,8,111,6],[133,14,111,12,"SecureStore"],[133,25,111,23],[133,26,111,24,"setItemAsync"],[133,38,111,36],[133,39,111,37],[133,51,111,49],[133,53,111,51,"token"],[133,58,111,56],[133,59,111,57],[135,8,113,6],[136,8,114,6,"api"],[136,11,114,9],[136,12,114,10,"defaults"],[136,20,114,18],[136,21,114,19,"headers"],[136,28,114,26],[136,29,114,27,"common"],[136,35,114,33],[136,36,114,34],[136,51,114,49],[136,52,114,50],[136,55,114,53],[136,65,114,63,"token"],[136,70,114,68],[136,72,114,70],[137,8,116,6,"set"],[137,11,116,9],[137,12,116,10],[138,10,117,8,"user"],[138,14,117,12],[139,10,118,8,"token"],[139,15,118,13],[140,10,119,8,"isLoading"],[140,19,119,17],[140,21,119,19],[141,8,120,6],[141,9,120,7],[141,10,120,8],[142,8,122,6],[142,15,122,13],[143,10,122,15,"is_new_user"],[144,8,122,27],[144,9,122,28],[145,6,123,4],[145,7,123,5],[145,8,123,6],[145,15,123,13,"error"],[145,20,123,23],[145,22,123,25],[146,8,124,6],[146,14,124,12,"message"],[146,21,124,19],[146,24,124,22,"error"],[146,29,124,27],[146,30,124,28,"response"],[146,38,124,36],[146,40,124,38,"data"],[146,44,124,42],[146,46,124,44,"detail"],[146,52,124,50],[146,56,124,54],[146,83,124,81],[147,8,125,6,"set"],[147,11,125,9],[147,12,125,10],[148,10,125,12,"isLoading"],[148,19,125,21],[148,21,125,23],[148,26,125,28],[149,10,125,30,"error"],[149,15,125,35],[149,17,125,37,"message"],[150,8,125,45],[150,9,125,46],[150,10,125,47],[151,8,126,6],[151,14,126,12],[151,18,126,16,"Error"],[151,23,126,21],[151,24,126,22,"message"],[151,31,126,29],[151,32,126,30],[152,6,127,4],[153,4,128,2],[153,5,128,3],[154,4,130,2,"createProfile"],[154,17,130,15],[154,19,130,17],[154,25,130,24,"data"],[154,29,130,28],[154,33,130,33],[155,6,131,4],[155,10,131,8],[156,8,132,6,"set"],[156,11,132,9],[156,12,132,10],[157,10,132,12,"isLoading"],[157,19,132,21],[157,21,132,23],[157,25,132,27],[158,10,132,29,"error"],[158,15,132,34],[158,17,132,36],[159,8,132,41],[159,9,132,42],[159,10,132,43],[160,8,134,6],[160,14,134,12,"response"],[160,22,134,20],[160,25,134,23],[160,31,134,29,"api"],[160,34,134,32],[160,35,134,33,"post"],[160,39,134,37],[160,40,134,38],[160,56,134,54],[160,58,134,56,"data"],[160,62,134,60],[160,63,134,61],[161,8,136,6,"set"],[161,11,136,9],[161,12,136,10],[162,10,137,8,"user"],[162,14,137,12],[162,16,137,14,"response"],[162,24,137,22],[162,25,137,23,"data"],[162,29,137,27],[163,10,138,8,"isLoading"],[163,19,138,17],[163,21,138,19],[164,8,139,6],[164,9,139,7],[164,10,139,8],[165,6,140,4],[165,7,140,5],[165,8,140,6],[165,15,140,13,"error"],[165,20,140,23],[165,22,140,25],[166,8,141,6],[166,14,141,12,"message"],[166,21,141,19],[166,24,141,22,"error"],[166,29,141,27],[166,30,141,28,"response"],[166,38,141,36],[166,40,141,38,"data"],[166,44,141,42],[166,46,141,44,"detail"],[166,52,141,50],[166,56,141,54],[166,82,141,80],[167,8,142,6,"set"],[167,11,142,9],[167,12,142,10],[168,10,142,12,"isLoading"],[168,19,142,21],[168,21,142,23],[168,26,142,28],[169,10,142,30,"error"],[169,15,142,35],[169,17,142,37,"message"],[170,8,142,45],[170,9,142,46],[170,10,142,47],[171,8,143,6],[171,14,143,12],[171,18,143,16,"Error"],[171,23,143,21],[171,24,143,22,"message"],[171,31,143,29],[171,32,143,30],[172,6,144,4],[173,4,145,2],[173,5,145,3],[174,4,147,2,"logout"],[174,10,147,8],[174,12,147,10],[174,18,147,10,"logout"],[174,19,147,10],[174,24,147,22],[175,6,148,4],[175,10,148,8],[176,8,149,6],[176,14,149,12,"SecureStore"],[176,25,149,23],[176,26,149,24,"deleteItemAsync"],[176,41,149,39],[176,42,149,40],[176,54,149,52],[176,55,149,53],[177,8,150,6],[177,15,150,13,"api"],[177,18,150,16],[177,19,150,17,"defaults"],[177,27,150,25],[177,28,150,26,"headers"],[177,35,150,33],[177,36,150,34,"common"],[177,42,150,40],[177,43,150,41],[177,58,150,56],[177,59,150,57],[178,8,151,6,"set"],[178,11,151,9],[178,12,151,10],[179,10,151,12,"user"],[179,14,151,16],[179,16,151,18],[179,20,151,22],[180,10,151,24,"token"],[180,15,151,29],[180,17,151,31],[181,8,151,36],[181,9,151,37],[181,10,151,38],[182,6,152,4],[182,7,152,5],[182,8,152,6],[182,15,152,13,"error"],[182,20,152,18],[182,22,152,20],[183,8,153,6,"console"],[183,15,153,13],[183,16,153,14,"log"],[183,19,153,17],[183,20,153,18],[183,35,153,33],[183,37,153,35,"error"],[183,42,153,40],[183,43,153,41],[184,6,154,4],[185,4,155,2],[185,5,155,3],[186,4,157,2,"clearError"],[186,14,157,12],[186,16,157,14,"clearError"],[186,17,157,14],[186,22,157,20,"set"],[186,25,157,23],[186,26,157,24],[187,6,157,26,"error"],[187,11,157,31],[187,13,157,33],[188,4,157,38],[188,5,157,39],[189,2,158,0],[189,3,158,1],[189,4,158,2],[189,5,158,3],[190,0,158,4],[190,3]],"functionMap":{"names":["<global>","create$argument_0","initialize","sendOTP","verifyOTP","createProfile","logout","clearError"],"mappings":"AAA;8CC0C;cCO;GDiC;WEE;GFgB;aGE;GHyB;iBIE;GJe;UKE;GLQ;cME,0BN;EDC"},"hasCjsExports":false},"type":"js/module"}]}